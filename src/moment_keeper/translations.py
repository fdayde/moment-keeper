"""Module de traductions pour MomentKeeper."""

TRANSLATIONS = {
    "fr": {
        # App principale
        "app_title": "🦖 MomentKeeper",
        "tagline": "Du Chaos à la Chronologie",
        "subtitle": "Organisez vos photos de 🦖 (bébé) par mois d'âge et découvrez vos habitudes photo",
        
        # Sidebar - Configuration
        "config_header": "Configuration",
        "main_folder": "📁 Dossier principal",
        "main_folder_placeholder": "C:/Users/Nom/ProjetPhotos",
        "main_folder_help": "Dossier qui contiendra les sous-dossiers par mois",
        "browse": "Parcourir",
        
        "source_folder": "📂 Dossier source",
        "source_folder_help": "Dossier contenant les fichiers non triés",
        "browse_subfolder": "Parcourir sous-dossier",
        
        "birth_date": "🦖 Date de naissance",
        "file_types": "📹 Type de fichiers",
        "photos": "📸 Photos",
        "videos": "🎬 Vidéos",
        "no_type_selected": "⚠️ Veuillez sélectionner au moins un type de fichier",
        
        "reset_button": "🔄 Réinitialiser",
        "reset_help": "Remet toutes les photos dans le dossier photos",
        
        # Tabs
        "tab_simulation": "🔍 Simulation",
        "tab_organization": "🗂️ Organisation",
        "tab_analytics": "📊 Analytics",
        "tab_insights": "🦖 Insights",
        
        # Simulation
        "simulation_title": "🦖 <strong>Simulation de l'organisation</strong><br>Prévisualisez sans déplacer vos fichiers !",
        "analyze_button": "🦖 Analyser les photos",
        "analyzing": "🦖 Analyse vos photos...",
        "no_files_found": "ℹ️ Aucune photo trouvée à organiser",
        "debug_details": "🔍 Détails de l'analyse",
        "birth_date_configured": "Date de naissance configurée : ",
        "ignored_files_count": "Nombre de fichiers ignorés : ",
        "warnings": "⚠️ Avertissements:",
        
        # Organisation
        "organization_title": "🗂️ <strong>Organisation réelle</strong><br>Temps de passer à l'action !",
        "organization_warning": "🦖 Attention petits bras ! Cette action déplacera réellement vos fichiers.",
        "confirm_organize": "Je confirme vouloir organiser mes {type}",
        "organize_button": "🦖 Organiser",
        "organizing": "🦖 Petits bras en action...",
        "errors_occurred": "❌ Erreurs rencontrées:",
        
        # Analytics
        "analytics_title": "📊 <strong>Analytics</strong><br>🦖 Découvrez les statistiques de votre petit explorateur !",
        "calculating_stats": "🦖 Calcul des statistiques en cours...",
        "no_data_analytics": "ℹ️ Aucune photo trouvée pour l'analyse",
        
        # Métriques
        "photos_kept": "📸 Photos gardées",
        "videos_kept": "🎬 Vidéos gardées",
        "last_capture": "📅 Dernière capture",
        "growth_period": "🗓️ Croissance",
        "daily_record": "🏆 Record quotidien",
        "average_rhythm": "📈 Rythme",
        "longest_gap": "⏱️ Plus long silence",
        
        # Insights
        "insights_title": "🦖 <strong>Insights</strong><br>Découvertes sur vos habitudes photo !",
        "searching_data": "🦖 Fouille dans vos données...",
        "discoveries": "### 🎯 Découvertes",
        "analyze_first": "Analysez d'abord vos photos pour voir les insights!",
        
        # Messages d'erreur
        "folder_not_exist": "❌ Le dossier photos '{folder}' n'existe pas dans {root}",
        "root_not_exist": "❌ Le dossier principal spécifié n'existe pas",
        "configure_root": "👈 Configurez le dossier principal dans la barre latérale",
        "folder_must_be_in_root": "Le dossier sélectionné doit être dans le dossier principal",
        "select_root_first": "Sélectionnez d'abord le dossier principal",
        
        # Footer
        "footer_love": "Créé avec ❤️ pour un 🦖 aux petits bras mais au grand cœur",
        "footer_version": "🦖 MomentKeeper v1.0",
        "footer_tagline": "\"Du Chaos à la Chronologie, une photo à la fois\"",
        
        # Messages dynamiques
        "success_simulation": "🦖 Rawr de satisfaction ! {photos} photos analysées et prêtes à être organisées !",
        "success_simulation_mixed": "🦖 Rawr de satisfaction ! {photos} 📸 photos et {videos} 🎬 vidéos analysées !",
        "success_organize": "🦖 Rawr de victoire ! {count} {type} parfaitement organisées !",
        "reset_success": "✅ {count} fichiers remis dans le dossier photos",
        
        # Unités
        "months": "mois",
        "photos_unit": "photos",
        "videos_unit": "vidéos",
        "files_unit": "fichiers",
        "and_more": "... et {count} autres",
    },
    
    "en": {
        # App principale
        "app_title": "🦖 MomentKeeper",
        "tagline": "From Chaos to Chronology",
        "subtitle": "Organize your 🦖 (baby) photos by age in months and discover your photo habits",
        
        # Sidebar - Configuration
        "config_header": "Configuration",
        "main_folder": "📁 Main folder",
        "main_folder_placeholder": "C:/Users/Name/PhotoProject",
        "main_folder_help": "Folder that will contain the monthly subfolders",
        "browse": "Browse",
        
        "source_folder": "📂 Source folder",
        "source_folder_help": "Folder containing unsorted files",
        "browse_subfolder": "Browse subfolder",
        
        "birth_date": "🦖 Birth date",
        "file_types": "📹 File types",
        "photos": "📸 Photos",
        "videos": "🎬 Videos",
        "no_type_selected": "⚠️ Please select at least one file type",
        
        "reset_button": "🔄 Reset",
        "reset_help": "Puts all photos back in the photos folder",
        
        # Tabs
        "tab_simulation": "🔍 Simulation",
        "tab_organization": "🗂️ Organization",
        "tab_analytics": "📊 Analytics",
        "tab_insights": "🦖 Insights",
        
        # Simulation
        "simulation_title": "🦖 <strong>Organization simulation</strong><br>Preview without moving your files!",
        "analyze_button": "🦖 Analyze photos",
        "analyzing": "🦖 Analyzing your photos...",
        "no_files_found": "ℹ️ No photos found to organize",
        "debug_details": "🔍 Analysis details",
        "birth_date_configured": "Configured birth date: ",
        "ignored_files_count": "Number of ignored files: ",
        "warnings": "⚠️ Warnings:",
        
        # Organisation
        "organization_title": "🗂️ <strong>Actual organization</strong><br>Time to take action!",
        "organization_warning": "🦖 Watch out tiny arms! This action will actually move your files.",
        "confirm_organize": "I confirm I want to organize my {type}",
        "organize_button": "🦖 Organize",
        "organizing": "🦖 Tiny arms in action...",
        "errors_occurred": "❌ Errors encountered:",
        
        # Analytics
        "analytics_title": "📊 <strong>Analytics</strong><br>🦖 Discover your little explorer's statistics!",
        "calculating_stats": "🦖 Calculating statistics...",
        "no_data_analytics": "ℹ️ No photos found for analysis",
        
        # Métriques
        "photos_kept": "📸 Photos kept",
        "videos_kept": "🎬 Videos kept",
        "last_capture": "📅 Last capture",
        "growth_period": "🗓️ Growth",
        "daily_record": "🏆 Daily record",
        "average_rhythm": "📈 Rhythm",
        "longest_gap": "⏱️ Longest gap",
        
        # Insights
        "insights_title": "🦖 <strong>Insights</strong><br>Discoveries about your photo habits!",
        "searching_data": "🦖 Digging through your data...",
        "discoveries": "### 🎯 Discoveries",
        "analyze_first": "Analyze your photos first to see insights!",
        
        # Messages d'erreur
        "folder_not_exist": "❌ The photos folder '{folder}' doesn't exist in {root}",
        "root_not_exist": "❌ The specified main folder doesn't exist",
        "configure_root": "👈 Configure the main folder in the sidebar",
        "folder_must_be_in_root": "The selected folder must be in the main folder",
        "select_root_first": "Select the main folder first",
        
        # Footer
        "footer_love": "Created with ❤️ for a 🦖 with tiny arms but a big heart",
        "footer_version": "🦖 MomentKeeper v1.0",
        "footer_tagline": "\"From Chaos to Chronology, one photo at a time\"",
        
        # Messages dynamiques
        "success_simulation": "🦖 Satisfaction roar! {photos} photos analyzed and ready to be organized!",
        "success_simulation_mixed": "🦖 Satisfaction roar! {photos} 📸 photos and {videos} 🎬 videos analyzed!",
        "success_organize": "🦖 Victory roar! {count} {type} perfectly organized!",
        "reset_success": "✅ {count} files put back in the photos folder",
        
        # Units
        "months": "months",
        "photos_unit": "photos",
        "videos_unit": "videos",
        "files_unit": "files",
        "and_more": "... and {count} more",
    }
}


class Translator:
    """Classe pour gérer les traductions."""
    
    def __init__(self, language='fr'):
        """
        Initialise le traducteur avec une langue.
        
        Args:
            language: Code de langue ('fr' ou 'en')
        """
        self.language = language
        self.translations = TRANSLATIONS
    
    def set_language(self, language: str):
        """Change la langue active."""
        if language in self.translations:
            self.language = language
    
    def t(self, key: str, **kwargs) -> str:
        """
        Traduit une clé avec des paramètres optionnels.
        
        Args:
            key: Clé de traduction
            **kwargs: Paramètres pour le formatage du texte
            
        Returns:
            Texte traduit
        """
        text = self.translations.get(self.language, {}).get(key, key)
        
        # Si des paramètres sont fournis, formater le texte
        if kwargs:
            try:
                text = text.format(**kwargs)
            except KeyError:
                # Si une clé manque, retourner le texte sans formatage
                pass
        
        return text
    
    def get_current_language(self) -> str:
        """Retourne la langue actuelle."""
        return self.language